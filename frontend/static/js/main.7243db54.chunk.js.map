{"version":3,"sources":["images/logo.svg","images/userpic.jpg","images/ok.svg","images/notOk.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/Popup.js","components/PopupWithForm.js","components/ImagePopup.js","utils/Api.js","hooks/useFormAndValidation.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","utils/Auth.js","components/InfoTooltip.js","components/App.js","reportWebVitals.js","index.js"],"names":["module","exports","__webpack_require__","p","Header","props","react_default","a","createElement","className","src","logo","alt","loggedIn","Fragment","type","id","htmlFor","email","react_router_dom","to","onClick","onLogout","link","linkTitle","CurrentUserContext","React","createContext","Card","user","useContext","isOwn","card","owner","_id","isLiked","likes","some","like","name","onCardClick","concat","onCardDelete","onCardLike","length","Main","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","userName","userDescription","userAvatar","userpic","_this2","context","onEditAvatar","onEditProfile","onAddPlace","cards","map","i","key","Component","Footer","Date","getFullYear","Popup","_ref","isOpen","onClose","children","useEffect","closeByEsc","evt","document","addEventListener","removeEventListener","target","currentTarget","PopupWithForm","_React$useState","useState","_React$useState2","slicedToArray","isPending","setIsPending","_React$useState3","_React$useState4","errorMessage","setErrorMessage","title","formName","noValidate","onSubmit","args","catch","e","finally","isChanged","disabled","buttonText","ImagePopup","changeCard","contextType","mestoApi","Api","coghortUrl","token","_root","_token","getCards","bind","getUser","setUser","toggleLike","setAvatar","setCard","deleteCard","res","ok","json","Promise","reject","status","fetch","headers","authorization","then","_checkRes","info","about","avatar","arg","method","Content-Type","body","JSON","stringify","cardId","useFormAndValidation","_useState","_useState2","values","setValues","_useState3","_useState4","errors","setErrors","_useState5","_useState6","isValid","setIsValid","resetForm","useCallback","newValues","arguments","undefined","newErrors","newIsValid","handleChange","_e$target","value","objectSpread","defineProperty","validationMessage","closest","checkValidity","EditProfilePopup","_useFormAndValidation","profession","_props$onUserUpdate","preventDefault","onUserUpdate","placeholder","required","minLength","maxLength","onChange","EditAvatarPopup","onAvatarUpdate","AddPlacePopup","Login","pending","setPending","navigate","useNavigate","stopPropagation","password","err","console","log","Register","ProtectedRoute","component","objectWithoutProperties","react_router","nomoAuth","Auth","url","_url","Authorization","InfoTooltip","setTimeout","success","notOk","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","_React$useState5","_React$useState6","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","_React$useState7","_React$useState8","isImagePopupOpen","setIsImagePopupOpen","_React$useState9","_React$useState10","isDeletePopupOpen","setIsDeletePopupOpen","_React$useState11","_React$useState12","isTooltipOpen","setIsTooltipOpen","_React$useState13","_React$useState14","cardToDelete","setCardToDelete","_React$useState15","_React$useState16","selectedCard","setSelectedCard","_React$useState17","_React$useState18","currentUser","setCurrenUser","_React$useState19","_React$useState20","setCards","_React$useState21","_React$useState22","setLoggedIn","_React$useState23","_React$useState24","autofill","setAutofill","_React$useState25","_React$useState26","isRegistred","setIsRegistred","checkToken","validate","localStorage","getItem","setItem","data","closeAllPopups","Provider","path","element","authorize","register","resolve","newCards","user-name","user-profession","user-pic","newUser","toConsumableArray","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.7243db54.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.51772f7c.svg\";","module.exports = __webpack_public_path__ + \"static/media/userpic.dc3245f1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ok.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/notOk.4072126c.svg\";","import React from 'react';\r\nimport logo from '../images/logo.svg';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nexport default function Header(props) {\r\n  return (\r\n    <header className=\"header\">\r\n      <img className=\"header__logo\" src={logo} alt=\"Логотип Место\" />\r\n      {\r\n        props.loggedIn \r\n          ? \r\n          <>\r\n            <input type=\"checkbox\" className=\"header__humburger-input\" id=\"burger\"/>\r\n            <label className=\"header__humburger\" htmlFor=\"burger\">\r\n              <h2 className=\"header__email\">{props.email}</h2>\r\n              <NavLink className=\"header__logout\" to=\"/sign-in\" onClick={props.onLogout}>Выйти</NavLink>\r\n            </label>\r\n          </>\r\n          : <NavLink className=\"header__link\" to={props.link}>{props.linkTitle}</NavLink>\r\n      }\r\n    </header>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nexport default function Card(props) {\r\n  const user = React.useContext(CurrentUserContext);\r\n\r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  }\r\n\r\n  function handleDelete() {\r\n    props.onCardDelete(props.card);\r\n  }\r\n  \r\n  function handleLike() {\r\n    props.onCardLike(props.card);\r\n  }\r\n  \r\n  const isOwn = user.id === props.card.owner._id;\r\n  const isLiked = props.card.likes.some(like => like._id === user.id);\r\n\r\n  return (\r\n    <div className=\"photo-grid__card\">\r\n      <img className=\"photo-grid__photo\" src={props.card.link} alt={props.card.name} onClick={handleClick} />\r\n      {\r\n        user &&\r\n        (<button className={`photo-grid__remove-button ${isOwn && 'photo-grid__remove-button_visible'}`} type=\"button\" onClick={handleDelete}></button>)\r\n      }\r\n      <div className=\"photo-grid__caption\">\r\n        <h2 className=\"photo-grid__textbox\">{props.card.name}</h2>\r\n        <div className=\"photo-grid__likewrapper\">\r\n          {\r\n            user &&\r\n            <button className={`photo-grid__like-button ${isLiked && `photo-grid__like-button_active`}`} type=\"button\" onClick={handleLike}></button>\r\n          }\r\n          <p className=\"photo-grid__likes\">{props.card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport userpic from '../images/userpic.jpg';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport Card from './Card';\r\n\r\n\r\nexport default class Main extends React.Component {\r\n  static contextType = CurrentUserContext;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      userName: 'Жак-Ив Кусто',\r\n      userDescription : 'Исследователь океана',\r\n      userAvatar: userpic,\r\n    }\r\n  }\r\n  \r\n  render() { \r\n    return (\r\n    <main>\r\n      <section className=\"profile\">\r\n        <button className=\"profile__img-button\" type=\"button\">\r\n          <img className=\"profile__avatar\" src={this.context[`user-pic`]} alt=\"Аватар\" />\r\n          <div className=\"profile__overlay\" onClick={this.props.onEditAvatar}></div>\r\n        </button>\r\n        <div className=\"profile__info\">\r\n          <h1 className=\"profile__name\">{this.context[`user-name`]}</h1>\r\n          <button className=\"profile__eddit-button\" type=\"button\" onClick={this.props.onEditProfile}></button>\r\n          <p className=\"profile__description\">{this.context[`user-profession`]}</p>\r\n        </div>\r\n        <button className=\"profile__add-button\" type=\"button\" onClick={this.props.onAddPlace}></button>\r\n      </section>\r\n\r\n      <section className=\"photo-grid\">\r\n      {\r\n        this.props.cards.map((card, i) => (\r\n          <Card \r\n            card={card}\r\n            key={card._id}\r\n            onCardClick={this.props.onCardClick}\r\n            onCardLike={this.props.onCardLike}\r\n            onCardDelete={this.props.onCardDelete}\r\n          />\r\n        ))\r\n      }\r\n      </section>\r\n    </main>\r\n  )}\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; {new Date().getFullYear()} Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\n\r\nexport default function Popup({name, isOpen, onClose, children}) {\r\n  React.useEffect(() => {\r\n    if (isOpen) return;\r\n\r\n    const closeByEsc = (evt) => {\r\n      if (evt.key === 'Escape') { \r\n        onClose(); \r\n      }\r\n    }\r\n\r\n    document.addEventListener('keydown', closeByEsc);\r\n    return () => document.removeEventListener('keydown', closeByEsc);\r\n  }, [isOpen, onClose]);\r\n\r\n  const handleOverlay = (evt) => {\r\n    if (evt.target === evt.currentTarget) {\r\n      onClose();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className={`pop-up ${isOpen ? 'pop-up_active' : ''} pop-up_type_${name}`}\r\n      onClick={handleOverlay}\r\n    >\r\n      <div className=\"pop-up__container\">\r\n        {children}\r\n        <button\r\n          className=\"pop-up__close-button\"\r\n          type=\"button\"\r\n          onClick={onClose}\r\n        /> \r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from \"react\";\r\nimport Popup from \"./Popup\";\r\n\r\nexport default function PopupWithForm(props) {\r\n  const [isPending, setIsPending] = React.useState(false);\r\n  const [errorMessage, setErrorMessage] = React.useState('testMessage');\r\n\r\n  React.useEffect(() => {setErrorMessage('')}, [props.isOpen]);\r\n  \r\n\r\n  function handleSubmit(args) {\r\n    setIsPending(true);\r\n    props.onSubmit(args)\r\n      .catch(e => {\r\n        setErrorMessage(e)\r\n      })\r\n      .finally(() => setIsPending(false));\r\n  }\r\n\r\n  return (\r\n    <Popup\r\n      name={props.name}\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n    >\r\n      <h2 className=\"pop-up__title\">{props.title}</h2>\r\n      <span className={`pop-up__network-error ${errorMessage ? \"pop-up__network-error_visible\" : \"\"}`} >{errorMessage}</span>\r\n        <form className=\"pop-up__form\" name={props.formName} noValidate onSubmit={handleSubmit}>\r\n          {props.children}\r\n          <button className={`pop-up__submit-button ${!props.isChanged ? 'pop-up__submit-button_inactive' : ''} ${isPending && \"pop-up__submit-button_pending\"}`} disabled={!props.isChanged} type=\"submit\" >{props.buttonText}</button>  \r\n        </form>\r\n    </Popup>\r\n  )\r\n}\r\n","import React from \"react\";\r\nimport Popup from \"./Popup\";\r\n\r\nexport default function ImagePopup(props) {\r\n  const [card, changeCard] = React.useState(null);\r\n  React.useEffect(() => {props.card && changeCard(props.card)}, [props.card]);\r\n  \r\n  return (\r\n    <Popup\r\n      onClose={props.onClose}\r\n      name={props.name}\r\n      isOpen={props.isOpen}\r\n    >\r\n      <img className=\"pop-up__image\" src={card && card.link} alt={card && card.name} />\r\n      <h2 className=\"pop-up__image-caption\">{card && card.name}</h2>\r\n    </Popup>\r\n  )\r\n}\r\n","class Api {\r\n  constructor({coghortUrl, token}) {\r\n    this._root = coghortUrl;\r\n    this._token = token;\r\n\r\n    this.getCards = this.getCards.bind(this);\r\n    this.getUser = this.getUser.bind(this);\r\n    this.getUser = this.getUser.bind(this);\r\n    this.setUser = this.setUser.bind(this);\r\n    this.toggleLike = this.toggleLike.bind(this);\r\n    this.setAvatar = this.setAvatar.bind(this);\r\n    this.setCard = this.setCard.bind(this);\r\n    this.deleteCard = this.deleteCard.bind(this);\r\n  }\r\n\r\n  _checkRes(res) {\r\n    if (res.ok) return res.json()\r\n      else return Promise.reject(`Error ${res.status}`);\r\n  }\r\n\r\n  getCards(){\r\n    return fetch(`${this._root}/cards`, {\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n    .then(this._checkRes);\r\n  }\r\n\r\n  getUser() {\r\n    return fetch(`${this._root}/users/me`, {\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n    .then(this._checkRes)\r\n    .then(res => {\r\n      const info = {}\r\n      info['user-name'] = res.name;\r\n      info['user-profession'] = res.about;\r\n      info['user-pic'] = res.avatar;\r\n      this._id = res._id;\r\n      info.id = res._id;\r\n      return info;\r\n    })\r\n  }\r\n\r\n  isMe(user) {\r\n    return user._id === this._id\r\n  }\r\n\r\n  setUser(info) {\r\n    const arg = {};\r\n    arg.name = info['user-name'];\r\n    arg.about = info['user-profession'];\r\n    return fetch(`${this._root}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(arg),\r\n    })\r\n    .then(this._checkRes) \r\n  }\r\n\r\n  toggleLike(cardId, isLiked) {\r\n    if (!isLiked) {return fetch(`${this._root}/cards/likes/${cardId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          authorization: this._token,\r\n          'Content-Type': 'application/json'\r\n        },\r\n      })\r\n      .then(this._checkRes);\r\n    } else {return fetch(`${this._root}/cards/likes/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          authorization: this._token,\r\n          'Content-Type': 'application/json'\r\n        },\r\n      })\r\n      .then(this._checkRes);\r\n    }\r\n  }\r\n\r\n  setAvatar(arg) {\r\n    return fetch(`${this._root}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(arg),\r\n    })\r\n    .then(this._checkRes);\r\n  }\r\n\r\n  setCard(card) {\r\n    return fetch(`${this._root}/cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(card),\r\n    })\r\n    .then(this._checkRes);\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._root}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n    })\r\n    .then(this._checkRes);\r\n  }\r\n}\r\n\r\nconst mestoApi = new Api({\r\n  coghortUrl: 'https://localhost:3000/',\r\n  token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MzAzY2UxYTI0OTM5NzFmMmZjZjQ5OTIiLCJpYXQiOjE2NjExOTM3ODUsImV4cCI6MTY2MTc5ODU4NX0.DCMjrlwu0mGx3AEmGJd_-jDJC58hp4u3DmfXj7AMB24',\r\n});\r\nexport default mestoApi;","import { useState, useCallback } from \"react\";\r\n\r\nexport default function useFormAndValidation() {\r\n  const [ values, setValues ] = useState({});\r\n  const [ errors, setErrors ] = useState({});\r\n  const [ isValid, setIsValid ] = useState(true);\r\n\r\n  const handleChange = (e) => {\r\n    const {name, value} = e.target\r\n    setValues({...values, [name]: value });\r\n    setErrors({...errors, [name]: e.target.validationMessage});\r\n    setIsValid(e.target.closest('form').checkValidity());\r\n  };\r\n\r\n  const resetForm = useCallback((newValues = {}, newErrors = {}, newIsValid = false) => {\r\n    setValues(newValues);\r\n    setErrors(newErrors);\r\n    setIsValid(newIsValid);\r\n  }, [setValues, setErrors, setIsValid]);\r\n\r\n  return {values, handleChange, errors, isValid, resetForm, setValues, setIsValid}\r\n}","import PopupWithForm from './PopupWithForm';\r\nimport React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport useFormAndValidation from '../hooks/useFormAndValidation';\r\n\r\nexport default function EditProfilePopup(props) {\r\n  const user = React.useContext(CurrentUserContext); \r\n  const {values, handleChange, errors, isValid, setValues, resetForm} = useFormAndValidation()\r\n\r\n  React.useEffect(() => {\r\n      resetForm();\r\n      setValues({name: user['user-name'], profession: user[`user-profession`]});\r\n    }\r\n  ,[user, props.isOpen])\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    return props.onUserUpdate({\r\n      [`user-name`]: values.name,\r\n      [`user-profession`]: values.profession,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile\"\r\n      formName=\"user-info\"\r\n      title=\"Редактировать профиль\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonText=\"Сохранить\"\r\n      isChanged={isValid}\r\n    >\r\n        <label className=\"pop-up__field\">\r\n          <input \r\n            className=\"pop-up__input pop-up__input_field_name\"\r\n            name=\"name\"\r\n            type=\"text\"\r\n            id=\"user-name\"\r\n            placeholder=\"Имя\"\r\n            required minLength=\"2\" maxLength=\"40\"\r\n            value={values.name || ''}\r\n            onChange={handleChange}\r\n          />\r\n          <span \r\n            className={`pop-up__input-error user-name-error ${(errors.name !== '')? 'pop-up__input-error_visable' : ''}`}>\r\n            {errors.name}\r\n          </span>\r\n        </label>\r\n        <label className=\"pop-up__field\">\r\n          <input \r\n            className=\"pop-up__input pop-up__input_field_info\"\r\n            name=\"profession\"\r\n            type=\"text\"\r\n            id=\"user-profession\"\r\n            placeholder=\"Род деятельности\"\r\n            required minLength=\"2\" maxLength=\"200\"\r\n            value={values.profession || ''}\r\n            onChange={handleChange}\r\n          />\r\n          <span className={`pop-up__input-error user-profession-error ${(errors.profession !== '')? 'pop-up__input-error_visable' : ''}`}>\r\n            {errors.profession}\r\n          </span>\r\n        </label>    \r\n    </PopupWithForm>\r\n  )\r\n}","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport useFormAndValidation from \"../hooks/useFormAndValidation\";\r\n\r\nexport default function EditAvatarPopup(props) {\r\n  \r\n  const {values, handleChange, errors, isValid, setValues, resetForm} = useFormAndValidation()\r\n\r\n  React.useEffect(() => {\r\n    resetForm();\r\n    setValues({avatar: ''});\r\n  },[props.isOpen])\r\n  \r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    return props.onAvatarUpdate(values.avatar);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n          name=\"avatar\"\r\n          formName=\"user-pic\"\r\n          title=\"Обновить аватар\"\r\n          buttonText=\"Сохранить\"\r\n          isOpen={props.isOpen}\r\n          onClose={props.onClose}\r\n          onSubmit={handleSubmit}\r\n          isChanged={isValid}\r\n          >\r\n            <label className=\"pop-up__field\"> \r\n              <input \r\n                name='avatar'\r\n                value={values.avatar || ''}\r\n                onChange={handleChange}\r\n                className=\"pop-up__input pop-up__input_field_avatar-link\"\r\n                type=\"url\" id=\"avatar\" placeholder=\"Ссылка на аватар\"\r\n                required\r\n              />\r\n              <span className={`pop-up__input-error avatar-error ${(errors.avatar !== '') ? 'pop-up__input-error_visable' : ''}`}>\r\n                {errors.avatar}\r\n              </span>          \r\n            </label>\r\n    </PopupWithForm>\r\n  )\r\n}","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport useFormAndValidation from \"../hooks/useFormAndValidation\";\r\n\r\nexport default function AddPlacePopup(props) {\r\n  const {values, handleChange, errors, isValid, resetForm} = useFormAndValidation()\r\n \r\n  React.useEffect(() => {\r\n      resetForm();\r\n  },[props.isOpen])\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    return props.onSubmit({name: values.name, link: values.link});\r\n  }\r\n\r\n  return (\r\n  <PopupWithForm \r\n    name=\"place\"\r\n    formName=\"place-form\"\r\n    title=\"Новое место\"\r\n    isOpen={props.isOpen}\r\n    onClose={props.onClose}\r\n    onSubmit={handleSubmit}\r\n    isChanged={isValid}\r\n    buttonText=\"Сохранить\"\r\n  >\r\n    <label className=\"pop-up__field\">\r\n      <input \r\n        className=\"pop-up__input pop-up__input_field_place-name\"\r\n        type=\"text\" id=\"name\" placeholder=\"Название\"\r\n        required minLength=\"2\" maxLength=\"30\"\r\n        onChange={handleChange}\r\n        name=\"name\"\r\n        value={values.name || ''}\r\n      />\r\n      <span className={`pop-up__input-error name-error ${(errors.name !== '')? 'pop-up__input-error_visable' : ''}`}>\r\n        {errors.name}\r\n      </span>          \r\n    </label>\r\n    <label className=\"pop-up__field\"> \r\n      <input \r\n        className=\"pop-up__input pop-up__input_field_place-link\"\r\n        type=\"url\" id=\"link\" placeholder=\"Ссылка на картинку\"\r\n        required\r\n        onChange={handleChange}\r\n        name=\"link\"\r\n        value={values.link || ''}\r\n      />\r\n      <span className={`pop-up__input-error link-error ${(errors.link !== '')? 'pop-up__input-error_visable' : ''}`}>\r\n        {errors.link}\r\n      </span>          \r\n    </label>\r\n  </PopupWithForm>\r\n  )\r\n}","import React from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport useFormAndValidation from \"../hooks/useFormAndValidation\";\r\n\r\nexport default function Login(props) {\r\n  const [pending, setPending] = React.useState(false);\r\n  const {values, handleChange, errors, isValid, setValues, resetForm} = useFormAndValidation()\r\n  const navigate = useNavigate();\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    setPending(true);\r\n    props.onSubmit({\r\n      password: values.password,\r\n      email: values.email\r\n    })\r\n      .then(() => {\r\n        navigate('/');\r\n      })\r\n      .catch(err => {\r\n        console.log(`failed to log in: ${err}`)\r\n      })\r\n      .finally(() => {\r\n        setPending(false);\r\n        setValues({password: ''})\r\n      });\r\n  }\r\n\r\n  return (\r\n      <div className=\"entry\" onClick={evt => evt.stopPropagation()}>\r\n        <h2 className=\"entry__title\">Вход</h2>\r\n        <span className={`entry__network-error`}>!!!</span>\r\n          <form className=\"entry__form\" noValidate onSubmit={handleSubmit}>\r\n            <label className=\"entry__field\">\r\n              <input  \r\n                name=\"email\"\r\n                onChange={handleChange}\r\n                value={values.email || ''}\r\n                className=\"entry__input entry__input_field_avatar-link\"\r\n                type=\"email\"\r\n                id=\"email\"\r\n                placeholder=\"Email\"\r\n                required\r\n              />\r\n              <span \r\n                className={`entry__input-error ${(errors.email !== '') ? 'entry__input-error_visable' : ''}`}>\r\n                {errors.email}\r\n              </span>\r\n            </label>\r\n\r\n            <label className=\"entry__field\">\r\n              <input  \r\n                onChange={handleChange}\r\n                name=\"password\"\r\n                value={values.password || ''}\r\n                className=\"entry__input entry__input_field_avatar-link\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                placeholder=\"Пароль\"\r\n                minLength={2}\r\n                maxLength={40}\r\n                required\r\n              />\r\n              <span className={`entry__input-error ${(errors.password !== '') ? 'entry__input-error_visable' : ''}`}>\r\n                {errors.password}\r\n              </span>\r\n            </label>\r\n\r\n            <button \r\n              className={`\r\n                entry__submit-button\r\n                ${!isValid && 'entry__submit-button_inactive'}\r\n                ${pending && 'entry__submit-button_pending'}\r\n              `}\r\n              disabled={!isValid}\r\n              type=\"submit\" >\r\n              Войти\r\n            </button>  \r\n          </form>\r\n      </div>\r\n  ); \r\n}","import React from 'react';\r\nimport { NavLink, useNavigate } from 'react-router-dom';\r\nimport useFormAndValidation from '../hooks/useFormAndValidation';\r\n\r\nexport default function Register(props) {\r\n  const [pending, setPending] = React.useState(false);\r\n  const {values, handleChange, errors, isValid, resetForm} = useFormAndValidation()\r\n  const navigate = useNavigate();\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    setPending(true);\r\n    props.onSubmit({\r\n      email : values.email,\r\n      password : values.password\r\n    })\r\n      .then(() => {\r\n        setPending(false);\r\n        navigate('/sign-in');\r\n      })\r\n      .catch((err) => {\r\n        console.log(`failed to Register: ${err}`)\r\n      })\r\n      .finally(() => {\r\n        setPending(false);\r\n        resetForm();\r\n      });\r\n  }\r\n\r\n  return (\r\n      <div className=\"entry\" onClick={evt => evt.stopPropagation()}>\r\n        <h2 className=\"entry__title\">Регистрация</h2>\r\n        <span className={`entry__network-error`}>!!!</span>\r\n          <form className=\"entry__form\" noValidate onSubmit={handleSubmit}>\r\n            <label className=\"entry__field\">\r\n              <input  \r\n                onChange={handleChange}\r\n                name=\"email\"\r\n                value={values.email || ''}\r\n                className=\"entry__input entry__input_field_avatar-link\"\r\n                type=\"email\"\r\n                id=\"email\"\r\n                placeholder=\"Email\"\r\n                required\r\n              />\r\n              <span \r\n                className={`entry__input-error ${(errors.email !== '') ? 'entry__input-error_visable' : ''}`}>\r\n                {errors.email}\r\n              </span>\r\n            </label>\r\n\r\n            <label className=\"entry__field\">\r\n              <input  \r\n                onChange={handleChange}\r\n                name=\"password\"\r\n                value={values.password || ''}\r\n                className=\"entry__input entry__input_field_avatar-link\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                placeholder=\"Пароль\"\r\n                minLength={2}\r\n                maxLength={40}\r\n                required\r\n              />\r\n              <span className={`entry__input-error ${(errors.password !== '') ? 'entry__input-error_visable' : ''}`}>\r\n                {errors.password}\r\n              </span>\r\n            </label>\r\n\r\n            <button \r\n              className={`\r\n                entry__submit-button\r\n                ${!isValid && 'entry__submit-button_inactive'}\r\n                ${pending && 'entry__submit-button_pending'}\r\n              `}\r\n              disabled={!isValid}\r\n              type=\"submit\" >\r\n              Зарегистрироваться\r\n            </button>  \r\n          </form>\r\n          <NavLink  className=\"entry__link\" to=\"/sign-in\">Уже зарегистрированы? Войти</NavLink>\r\n      </div>\r\n  ); \r\n}","import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nexport default function ProtectedRoute({ component: Component, ...props }) {\r\n  return (\r\n    <>\r\n      {\r\n        props.loggedIn ? <Component {...props} /> : <Navigate to=\"/sign-in\" />\r\n      }\r\n    </>\r\n  );\r\n};\r\n","class Auth {\r\n  constructor({url, ...args}) {\r\n    this._url = url;\r\n  }\r\n\r\n  _checkRes(res) {\r\n    if (res.ok) return res.json()\r\n      else return Promise.reject(`Error ${res.status}`);\r\n  }\r\n\r\n  register(args) {\r\n    const body = JSON.stringify({\r\n      \"password\": args.password,\r\n      \"email\": args.email\r\n    });\r\n    return fetch(`${this._url}/signup`, {\r\n      method: 'POST',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: body,\r\n    })\r\n      .then(this._checkRes);\r\n  }\r\n\r\n  authorize(args) {\r\n    const body = JSON.stringify(args);\r\n    return fetch(`${this._url}/signin`, {\r\n      method: 'POST',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: body\r\n    })\r\n      .then(this._checkRes);\r\n  }\r\n\r\n  validate(args) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\" : `Bearer ${args.token}`\r\n      },\r\n    })\r\n      .then(this._checkRes);\r\n  }\r\n}\r\n\r\nconst nomoAuth = new Auth({\r\n  url: 'https://localhost:3000/',\r\n});\r\n\r\nexport default nomoAuth;","import React from 'react';\r\nimport Popup from './Popup';\r\nimport ok from '../images/ok.svg';\r\nimport notOk from '../images/notOk.svg';\r\n\r\nexport default function InfoTooltip(props) {\r\n  React.useEffect(() => {\r\n    if (props.isOpen) {setTimeout(props.onClose, 3000);}\r\n  }, [props.isOpen])\r\n\r\n  return (\r\n    <Popup\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      name={''}\r\n    >\r\n      <img className=\"pop-up__icon\" src={props.success? ok : notOk} alt={props.success ? 'OK' : 'Not Ok'}/>\r\n      <h2 className=\"pop-up__title pop-up__title_centered\">{props.success ? `Вы успешно зарегистрировались` : `Что-то пошло не так!\r\nПопробуйте ещё раз.`}</h2>\r\n    </Popup>\r\n  );\r\n}","import Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport ImagePopup from './ImagePopup';\r\nimport React from 'react';\r\nimport mestoApi from '../utils/Api';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport { Route, Routes, useNavigate } from 'react-router-dom';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport nomoAuth from '../utils/Auth';\r\nimport InfoTooltip from './InfoTooltip';\r\n\r\nexport default function App() {\r\n  const navigate = useNavigate();\r\n\r\n  const  [isEditProfilePopupOpen,setIsEditProfilePopupOpen]= React.useState(false);\r\n  const  [isAddPlacePopupOpen,setIsAddPlacePopupOpen]= React.useState(false);\r\n  const  [isEditAvatarPopupOpen,setIsEditAvatarPopupOpen]= React.useState(false);\r\n  const  [isImagePopupOpen,setIsImagePopupOpen]= React.useState(false);\r\n  const  [isDeletePopupOpen,setIsDeletePopupOpen]= React.useState(false);\r\n  const  [isTooltipOpen,setIsTooltipOpen]= React.useState(false);\r\n  \r\n  const [cardToDelete, setCardToDelete] = React.useState(null);\r\n  const [selectedCard, setSelectedCard] = React.useState(null);\r\n  const [currentUser, setCurrenUser] = React.useState(null);\r\n  const [cards, setCards] = React.useState([]);\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n  const [autofill, setAutofill] = React.useState({password: '', email: ''});\r\n  const [isRegistred, setIsRegistred] = React.useState(false);\r\n  \r\n  React.useEffect(\r\n    () => {\r\n      checkToken();\r\n\r\n      mestoApi.getUser()\r\n        .then(user => {\r\n          setCurrenUser(user);\r\n        })\r\n        .catch(err => console.log(`Failed to load initial user : ${err}`));\r\n      \r\n      mestoApi.getCards()\r\n        .then (cards => {\r\n          setCards(cards);\r\n        })\r\n        .catch(err => console.log(`Failed to load initial cards : ${err}`));\r\n    },\r\n    []\r\n  );\r\n  \r\n  const checkToken = () => {\r\n    nomoAuth.validate({token: localStorage.getItem('token')})\r\n      .then(res => {\r\n        localStorage.setItem('email', res.data.email);\r\n        setLoggedIn(true);\r\n        setAutofill({email: localStorage.getItem('email')});\r\n        navigate('/');\r\n      })\r\n      .catch(err => {\r\n        console.log(`first time eh? ${err}`);\r\n      });\r\n      \r\n  }\r\n\r\n  const handleRegister = (args) => {\r\n    return nomoAuth.register(args)\r\n      .then(res => {\r\n        localStorage.setItem('email', res.data.email);\r\n        setAutofill({password: args.password, email: args.email});\r\n        setIsRegistred(true);\r\n        return Promise.resolve(res);\r\n      })\r\n      .catch(err => {\r\n        setIsRegistred(false);\r\n        return Promise.reject(err);\r\n      })\r\n      .finally(() => {\r\n        setIsTooltipOpen(true);\r\n      });\r\n  }\r\n\r\n  const handleLogin = (args) => {\r\n    return nomoAuth.authorize(args)\r\n      .then(res => {\r\n        localStorage.setItem('email', args.email);\r\n        localStorage.setItem('token', res.token);\r\n        setLoggedIn(true);\r\n        setAutofill({\r\n          email: args.email,\r\n          password: args.password,\r\n        });\r\n      });\r\n    }\r\n    \r\n  const handleLogout = () => {\r\n    localStorage.setItem('email', '');\r\n    localStorage.setItem('token', '');\r\n    setLoggedIn(false);\r\n  }\r\n\r\n  const handleEditProfileClick = () => {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  const handleEditAvatarClick = () => {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n  \r\n  const handleAddPlaceClick = () => {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  const handleCardClick = (card) => {\r\n    setSelectedCard(card);\r\n    setIsImagePopupOpen(true);\r\n  }\r\n\r\n  const handleLikeClick = (card) => {\r\n    const isLiked = card.likes.some(like => like._id === currentUser.id);\r\n    mestoApi.toggleLike(card._id, isLiked)\r\n      .then (res =>{\r\n        const newCards = cards.map(card => {return card._id === res._id ? res: card});\r\n        setCards(newCards);\r\n      })\r\n      .catch(err => console.log(`Failed to change like status : ${err}`))\r\n  }\r\n\r\n  const handleDeleteClick = (card) => {\r\n    closeAllPopups();\r\n    setCardToDelete(card);\r\n    setSelectedCard(card);\r\n    setIsDeletePopupOpen(true);\r\n  }\r\n\r\n  const handleDeleteSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    return mestoApi.deleteCard(cardToDelete._id)\r\n      .then(() => {\r\n        setCards(cards.filter(card => card._id !== cardToDelete._id));\r\n        setCardToDelete(null);\r\n        closeAllPopups();\r\n        return Promise.resolve();\r\n      })\r\n      .catch(err => {\r\n        return Promise.reject(`Failed to delete card : ${err}`);\r\n      })\r\n  }\r\n\r\n  const closeAllPopups = () => {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsImagePopupOpen(false);\r\n    setIsDeletePopupOpen(false);\r\n    setSelectedCard(null);\r\n    setIsTooltipOpen(false);\r\n  }\r\n\r\n  const handleUserUpdate = (user) => {\r\n    return mestoApi.setUser(user)\r\n      .then(res => {\r\n        setCurrenUser({\r\n          'user-name': res.name,\r\n          'user-profession': res.about,\r\n          'user-pic': res.avatar,\r\n          id: res._id,\r\n        });\r\n        closeAllPopups();\r\n        return Promise.resolve(res);\r\n      })\r\n      .catch(err => {\r\n        return Promise.reject(`Failed to update user info : ${err}`);\r\n      });\r\n  }\r\n\r\n  const handleAvatarUpdate = (link) => {\r\n    return mestoApi.setAvatar({avatar: link})\r\n      .then(res => {\r\n        const newUser = currentUser;\r\n        newUser[`user-pic`] = res.avatar;\r\n        setCurrenUser(newUser);\r\n        closeAllPopups();\r\n        return Promise.resolve(res);\r\n      })\r\n      .catch(err => {\r\n        return Promise.reject(`Failed to update user avatar : ${err}`);\r\n      });\r\n  }\r\n\r\n  const handleAddPlaceSubmit = (args) => {\r\n    return mestoApi.setCard(args)\r\n      .then(res => {\r\n        setCards([res, ...cards]);\r\n        closeAllPopups();\r\n        return Promise.resolve(res);\r\n      })\r\n      .catch(err => {\r\n        return Promise.reject(`Failed to upload new place : ${err}`);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser || ''}>\r\n\r\n      <Routes>\r\n        <Route path=\"/sign-in\" element={\r\n          <>\r\n            <Header loggedIn={loggedIn} linkTitle=\"Регистрация\" link=\"/sign-up\" />\r\n            <Login onSubmit={handleLogin} password={autofill.password} email={autofill.email} />\r\n          </>\r\n        }/>\r\n\r\n        <Route path=\"/sign-up\" element={\r\n          <>\r\n            <Header loggedIn={loggedIn} linkTitle=\"Войти\" link=\"/sign-in\"/>\r\n            <Register onSubmit={handleRegister}/>\r\n          </>\r\n        }/>\r\n\r\n        <Route path=\"/\" element={\r\n          <>\r\n            {loggedIn && <Header loggedIn={loggedIn} email={localStorage.getItem('email')} onLogout={handleLogout}/>}\r\n            <ProtectedRoute \r\n              loggedIn={loggedIn}\r\n\r\n              component={Main}\r\n              onEditProfile={handleEditProfileClick}\r\n              onAddPlace={handleAddPlaceClick}\r\n              onEditAvatar={handleEditAvatarClick}\r\n              onCardClick={handleCardClick}\r\n              cards={cards}\r\n              onCardLike={handleLikeClick}\r\n              onCardDelete={handleDeleteClick}\r\n            />\r\n          </>\r\n        }/>\r\n      </Routes>\r\n      \r\n      {loggedIn && <Footer />}\r\n\r\n      <EditProfilePopup\r\n        isOpen={isEditProfilePopupOpen}\r\n        onClose={closeAllPopups}\r\n        onUserUpdate={handleUserUpdate}\r\n      />\r\n\r\n      <EditAvatarPopup\r\n        isOpen={isEditAvatarPopupOpen}\r\n        onClose={closeAllPopups}\r\n        onAvatarUpdate={handleAvatarUpdate}  \r\n      />\r\n\r\n      <AddPlacePopup \r\n        isOpen={isAddPlacePopupOpen}\r\n        onClose={closeAllPopups}\r\n        onSubmit={handleAddPlaceSubmit}\r\n      />\r\n\r\n      <PopupWithForm \r\n        name=\"confirm\"\r\n        title=\"Вы уверены?\"\r\n        buttonText=\"Да\"\r\n        formName=\"user-confirm\"\r\n        isOpen={isDeletePopupOpen}\r\n        onClose={closeAllPopups}\r\n        onSubmit={handleDeleteSubmit}\r\n        isChanged={true}\r\n      />\r\n\r\n      <InfoTooltip\r\n        isOpen={isTooltipOpen}\r\n        success={isRegistred}\r\n        onClose={closeAllPopups}\r\n      />\r\n\r\n      <ImagePopup card={selectedCard} onClose={closeAllPopups} isOpen={isImagePopupOpen}/>\r\n    </CurrentUserContext.Provider>\r\n  )\r\n}\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport {BrowserRouter} from 'react-router-dom';\r\n\r\nconst root = ReactDOM.createRoot(document.getElementById('root'));\r\nroot.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}